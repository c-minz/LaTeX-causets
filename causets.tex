%% Copyright 2020-2025 by C. Minz
% Current package version: v1.5 (2024/02/24).
\documentclass[12pt]{article}
\usepackage[a4paper, left = 2.5cm, right = 2.5cm, top = 2.5cm, bottom = 2.5cm]{geometry}
\usepackage[english]{babel}
\usepackage{lmodern}
\linespread{1.20} % line spreading
\setlength{\parindent}{2em} % paragraph indent
\setlength{\parskip}{0em} % space between paragraphs
\usepackage{titlesec} % change headline formats
\renewcommand{\thesection}{\arabic{section}}
\titlespacing*{\section}{0pt}{15pt}{5pt}
\titleformat{\section}{\large\bfseries\sffamily}{\thetitle}{17pt}{}{}
\renewcommand{\thesubsection}{}
\titlespacing*{\subsection}{0pt}{15pt}{5pt}
\titleformat{\subsection}{\small\bfseries\sffamily}{\thetitle}{0pt}{}{}
\renewcommand{\thesubsubsection}{}
\titlespacing*{\subsubsection}{0pt}{5pt}{0pt}
\titleformat{\subsubsection}{\small\sffamily\itshape}{\thetitle}{0pt}{}{}
\usepackage{fancyhdr} % advanced header and footer
\pagestyle{fancy}
\fancypagestyle{plain}{\fancyhf{}\renewcommand{\headrulewidth}{0.0pt}}
\setlength{\headheight}{16.0pt}
\fancyhead[L]{}
\fancyhead[C]{}
\fancyhead[R]{\sffamily causets package manual}
\renewcommand{\headrulewidth}{0.2pt}
\renewcommand{\footrulewidth}{0.0pt}
\fancyfoot[L]{}
\fancyfoot[C]{}
\fancyfoot[R]{\sffamily \thepage}
\usepackage{hyperref} % cross references
\hypersetup{%
  bookmarksopen = true, %
  bookmarksopenlevel = 0, %
  bookmarksnumbered = true, %
  pdftitle = {{Package documentation: causets}}, %
  pdfauthor = {{Christoph Minz}}, %
  pdfstartpage = 1, %
  pdfstartview = {FitH}, %
  breaklinks = false, %
  colorlinks = true, %
  linkcolor = black!50!blue, %
  citecolor = black, %
  filecolor = black, %
  menucolor = black, %
  urlcolor = black!25!blue %
}
\addto\extrasenglish{%
  \renewcommand{\sectionautorefname}{Sec.}%
  \renewcommand{\subsectionautorefname}{Sec.}%
}
\usepackage{booktabs} % book table style
\usepackage{longtable} % tables spanning pages
\usepackage{multirow} % spanning multiple rows
\usepackage{listings} % code environments
\lstset{
  backgroundcolor=\color{yellow!50!black!10},
  basicstyle=\ttfamily\footnotesize,
  breakatwhitespace=true,
  breaklines=true,
  captionpos=b,
  commentstyle=\color{green!50!black!50!gray},
  keepspaces=true,
  keywordstyle={},
  language=TeX,
  numbers=left,
  numbersep=5pt,
  numberstyle=\scriptsize\color{black!35},
  rulecolor=\color{black},
  showspaces=false,
  showstringspaces=false,
  showtabs=false,
  stepnumber=1,
  stringstyle=\color{purple!50!black},
  tabsize=2
}

\usepackage{amsmath}
\usepackage[external]{causets}

\newcommand*{\PH}[1][value]{{\small\itshape$\langle$#1$\rangle$}} % placeholder
\newcommand*{\LaTeXML}{{\LaTeX}ML}

\usetikzlibrary{tikzmark}
\newcommand*{\versioncauset}[3][-1.03cm]{%
\tikzmark{#2}%
\tikz[remember picture, overlay]%
  \path (pic cs:#2) -- ++(-1cm, 0.5em) -- ++(#1, 0) node {#3};%
}% \versioncauset

\title{{\small package}\\[0.5cm]%
\huge causets\\[0.2cm]%
{\small version 1.5\\[0.5cm]}}
\author{Christoph Minz}
\date{2025/02/24}

\begin{document}

{\sffamily\maketitle

\vspace{-2em}
\begin{center}
--- supported with the \href{https://c-minz.github.io/assets/html/proset-editor.html}{PrOSET editor} online ---
\end{center}
}


\begin{center}\tikzcausetsset{large}
$$
  \left\{
    \pcauset[name=3Antichain_large]{3,2,1},
    \pcauset[name=2ChainUnion1Chain_large]{3,1,2},
    \pcauset[name=Wedge_large]{2,1,3},
    \pcauset[name=Vee_large]{1,3,2},
    \pcauset[name=3Chain_large]{1,2,3}
  \right\}
  ,
\qquad
  \causetsDrawLabelstrue
  \left\{
    \pcauset[name=3Antichain_largelabeled]{3,2,1},
    \pcauset[name=2ChainUnion1Chain_largelabeled]{3,1,2},
    \pcauset[name=Wedge_largelabeled]{2,1,3},
    \pcauset[name=Vee_largelabeled]{1,3,2},
    \pcauset[name=3Chain_largelabeled]{1,2,3}
  \right\}
  ,
$$
\\[-1em]
$$
  \causetsDrawPermutationtrue
  \left\{
    \pcauset[name=3Antichain_largeperm]{3,2,1},
    \pcauset[name=2ChainUnion1Chain_largeperm]{3,1,2},
    \pcauset[name=Wedge_largeperm]{2,1,3},
    \pcauset[name=Vee_largeperm]{1,3,2},
    \pcauset[name=3Chain_largeperm]{1,2,3}
  \right\}
$$
\end{center}
\vfill

{\itshape
The purpose of this package is to typeset partial ordered sets (posets for short) as Hasse diagrams in a style that is particularly suited for causal set theory (a theory of quantum gravity).
Causal sets (\textbf{causets} for short) are locally finite, partially ordered sets, where the partial order is the causal relation between elements.
This relation forms a cone structure (light-cones) such that all past and future related elements of an element fall within a lower and upper cone, respectively, opening in 90 degree angles.

The drawing algorithm (based on TikZ) makes use of the fact that every finite causet that embeds in $\smash{1 + 1}$ dimensional Minkowski spacetime is a product of two total orders (2-order), where one order is taken to be the standard total order of integers labelling all causet elements, while the other is a permutation of the labels\footnote{See \url{https://arxiv.org/abs/0706.0375} and \url{https://arxiv.org/abs/2011.02965} for more details on 2-orders and causal sets.}.
Such a permutation is the main input for the macros.
For any higher dimensional poset, there exists a 2-order such that the higher dimensional diagram is obtained by removing links from the 2-order.
The online tool ``PrOSET editor'' helps to construct any Hasse diagram and export its macro for use in a \LaTeX\ document.
}

\clearpage


\section{The three main commands}
\label{sec:Introduction}

This package is built on the package \lstinline§tikz§ to draw the diagrams.
To import the \lstinline§causets§ package into a \LaTeX\ file, write
\begin{lstlisting}
\usepackage{causets}
\end{lstlisting}
in the preamble of the document (this will automatically load the \lstinline§tikz§ package as well).

For the command introduction in \autoref{tab:MainCommandsExamples}, I use the package options \lstinline§black§ (only black and white diagrams) and \lstinline§permutation§ (also shows the permutation),
\begin{lstlisting}
\usepackage[black,permutation]{causets}
\end{lstlisting}
At first, let us take a brief look at the three main commands of the package, before we look into the (physical) ideas behind these three commands.

The three main commands of this package are
\begin{lstlisting}
\pcauset{...,i,...,k,...,j,...}
\rcauset{...}{...,i/j,...}
\causet{...}{...,i/j,...}
\end{lstlisting}
The first command takes a permutation of the integers from an interval $[ a, b ]$ (where $N = b - a + 1 \geq 0$ is the cardinality of the causet).
The permutation determines the event positions and causal structure such that events $i$ and $j$ are linked if $i < j$ and there is no $k > j$ between $i$ and $j$ in the permutation.
The second command does the same, but removes (restyles) links between event pairs \lstinline§i/j§ as given in the second argument.
The third command only uses the permutation to position the events, the links have to be explicitly specified by event pairs \lstinline§i/j§ in the second argument.

Any causet that can be embedded in $1 + 1$ dimensional Minkowski spacetime can also be described by the product of two total orders (a 2-order).
Let the causet elements be labeled by an increasing null coordinate $u$.
In the first diagram of \autoref{tab:MainCommandsExamples}, the $u$-coordinate axis points upwards on the right hand side.
The causal relation (partial order) implies a label permutation along the null coordinate $v$ (pointing upwards along the left axis).
This permutation is the input of the \lstinline§\pcauset§ command that computes the causal relation from the permutation.
See example 1 in \autoref{tab:MainCommandsExamples}.
\begin{table}[h!]
  \centering
  \tikzcausetsset{black colors, show permutation}
  \begin{tabular*}{\textwidth}{lp{0.75\textwidth}c}
    \toprule
    \#
  & command
  & inline output
  \\\midrule
    1
  & \lstinline§\pcauset{4,7,2,6,1,5,3}§
  & \pcauset[name=pcausetExample_perm]{4,7,2,6,1,5,3}
  \\\midrule
    2
  & \lstinline§\rcauset{4,7,2,6,1,5,3}{2/5}§
  & \rcauset[name=rcausetExample_perm]{4,7,2,6,1,5,3}{2/5}
  \\\midrule
    3
  & \lstinline§\causet{4,7,2,6,1,5,3}{1/3,1/5,2/3,2/6,4/5,4/6,4/7}§
  & \causet[name=causetExample_perm]{4,7,2,6,1,5,3}{1/3,1/5,2/3,2/6,4/5,4/6,4/7}
  \\\bottomrule
  \end{tabular*}
  \caption{\label{tab:MainCommandsExamples} Examples of the three main commands.}
\end{table}

Every causet that does not embed in $1 + 1$ dimensional Minkowski spacetime can be made embeddable by adding links, for which the \lstinline§\rcauset§ command is defined.
Find an embedding causet by adding a minimal number of causal relations to the given causet.
The so obtained, embedding causet gives a permutation as discussed before for the \lstinline§\pcauset§ causet.
The links that have been added to obtain this permutation need to be removed from the generated causet, which is specified by link pairs \lstinline§i/j§ in the second argument.
See example 2 in \autoref{tab:MainCommandsExamples}.

In some situations, it might be easier to specify the list of link pairs that exist, instead of removing links.
For this purpose, use the \lstinline§\causet§ command.
As an example, we rewrite the example 2 by specifying all existing links as pairs, see example 3 in \autoref{tab:MainCommandsExamples}.
Note that the \lstinline§\rcauset§ command was actually much shorter for this particular example.
However, if the list of link pairs in the \lstinline§\rcauset§ command is very long, specifying all existing link pairs instead with the \lstinline§\causet§ yields a faster performance.

You may use any of the three main commands to add a causet diagram in-line with text or within a mathematical expression.
As an example for the use in a mathematical equation, here is the code for the first set of causets on the title page:
\begin{lstlisting}
\usepackage{causets}
...
\begin{document}
...
\begin{align}
  S &=
  \left\{
    \pcauset{3,2,1}, \pcauset{3,1,2}, \pcauset{2,1,3}, \pcauset{1,3,2}, \pcauset{1,2,3}
  \right\}.
\end{align}
\end{lstlisting}
%\vspace{-1ex}
\begin{align}
  S &=
  \left\{
    \pcauset[name=3Antichain]{3,2,1},
    \pcauset[name=2ChainUnion1Chain]{3,1,2},
    \pcauset[name=Wedge]{2,1,3},
    \pcauset[name=Vee]{1,3,2},
    \pcauset[name=3Chain]{1,2,3}
  \right\}
  .
\end{align}

Of course, a given causet might have more than one representing permutation, so that any of those permutations may be used.
However, you may consider it a good practice to choose the permutation that starts with the larger integer, so that disjoint elements appear to the right in the graphs.
For example, you may write \lstinline§\pcauset{3,1,2}§, \pcauset[name=2ChainUnion1Chain]{3,1,2}, as opposed to \lstinline§\pcauset{2,3,1}§, \pcauset[name=1ChainUnion2Chain]{2,3,1}.

The arguments of the commands are lists that are iterated over by a \lstinline§\foreach§ loop of PGF/TikZ.
So you may use dots {...} to complete ranges of integers automatically.
You may use this feature to draw chains like \pcauset[name=5Chain]{1,...,5} (with \lstinline§\pcauset{1,...,5}§) or antichains like \pcauset[name=5Antichain]{5,...,1} (with \lstinline§\pcauset{5,...,1}§).
As a more complex example for the dots notation, consider
\begin{lstlisting}
\pcauset{20,18,...,8, 1,7,6,...,2, 9,11,...,19}
\end{lstlisting}
which produces the same diagram as
\begin{lstlisting}
\pcauset{20,18,16,14,12,10,8, 1,7,6,5,4,3,2, 9,11,13,15,17,19}
\end{lstlisting}
\begin{center}
  \pcauset[black colors, permutation, name=DotsExample_perm]{20,18,16,...,8,1,7,6,...,2,9,11,...,19}
\end{center}

In an optional argument, the main commands accepts any causets or TikZ keys to change the style of the causet.
For example, the blue causet \pcauset[blue colors, name=NDash_blue]{2,4,5,1,3} is obtained with
\begin{lstlisting}
\pcauset[blue colors]{2,4,5,1,3}
\end{lstlisting}

Example diagrams together with their \LaTeX\ macros are included on the project website \url{https://c-minz.github.io/projects/poset_diagrams}.
To help create and modify poset diagrams visually, I developed the PrOSET editor as an online tool, which exports the result as \LaTeX\ macros (and other data formats): \\
\url{https://c-minz.github.io/assets/html/proset-editor.html}

Whenever you use this package to compose a publication to be uploaded to the arXiv, or a document that may be converted to XML or HTML with \LaTeXML, this package provides special support.
To replace the diagram figures especially for screen readers, add a short description with the key \lstinline§alt={§\PH\lstinline§}§ in the optional argument.
For example, the code
\begin{lstlisting}
\pcauset[alt={N}]{2,4,1,3},
\pcauset[alt={union of an N and a 2-chain}]{5,6,2,4,1,3}
\end{lstlisting}
adds ``N'' as alternative text for \pcauset[name=N, alt={N}]{2,4,1,3}, and ``union of an N and a 2-chain'' as description for \pcauset[name=N_2-chain, alt={union of an N and a 2-chain}]{5,6,2,4,1,3}.
If no alternative text is specified, the default value ``causet'' is used (which is set in the style \lstinline§every causet§).


\section{Package options}
\label{sec:PackageOptions}

Each of the package options can either be specified in square brackets when declaring the package (option applies globally) or be changed with a macro at any point in the document (option applies to the local scope).

If no options are used, an output like \rcauset[name=Options_rcauset, alt={3-crown with doubled top right}]{4,2,7,6,1,5,3}{2/5} is obtained with the code
\begin{lstlisting}
\usepackage{causets}
... \begin{document} ...
\rcauset[alt={3-crown with doubled top right}]{4,2,7,6,1,5,3}{2/5}
\end{lstlisting}

The options -- given in the following table -- are passed to the \lstinline§causets§ package as optional parameter and can be combined.
The package options are listed together with example outputs created with the commands
\begin{lstlisting}
\pcauset{4,2,7,6,1,5,3}
\rcauset{4,2,7,6,1,5,3}{2/5}
\end{lstlisting}
If not specified otherwise, any package option also works with the command \lstinline§\causet§.

\begin{longtable}{p{0.63\textwidth}p{0.14\textwidth}p{0.14\textwidth}}
  \toprule
  Package option & \lstinline§\pcauset§ & \lstinline§\rcauset§
  \\\midrule
  \endfirsthead

  \multicolumn{3}{c}{\footnotesize \textit{continued from the previous page}}
  \\\midrule
  Package option & \lstinline§\pcauset§ & \lstinline§\rcauset§
  \\\midrule
  \endhead

  \midrule
  \multicolumn{3}{c}{\footnotesize \textit{continued on the next page}}
  \endfoot

  \endlastfoot

  \lstinline§\usepackage[permutation]{causets}§ shows permutations
& \multirow{3}{5em}{%
  \causetsDrawPermutationtrue \pcauset[name=Options_pcauset_perm]{4,2,7,6,1,5,3}}
& \multirow{3}{5em}{%
  \causetsDrawPermutationtrue \rcauset[name=Options_rcauset_perm]{4,2,7,6,1,5,3}{2/5}}
\\
  (\lstinline§\causetsDrawPermutationtrue§ activates this option)
\\
  (\lstinline§\causetsDrawPermutationfalse§ deactivates this option)
\\\midrule
  \lstinline§\usepackage[permutation, uunlabeled]{causets}§
& \multirow{4}{5em}{%
  \causetsDrawPermutationtrue \causetsDrawULabelsfalse \pcauset[name=Options_pcauset_permv]{4,2,7,6,1,5,3}}
& \multirow{4}{5em}{%
  \causetsDrawPermutationtrue \causetsDrawULabelsfalse \rcauset[name=Options_rcauset_permv]{4,2,7,6,1,5,3}{2/5}}
\\
  shows permutations without u-labels
\\
  (\lstinline§\causetsDrawULabelstrue§ activates u-labels)
\\
  (\lstinline§\causetsDrawULabelsfalse§ deactivates u-labels)
\\\midrule
  \lstinline§\usepackage[permutation, vunlabeled]{causets}§
& \multirow{4}{5em}{%
  \causetsDrawPermutationtrue \causetsDrawVLabelsfalse \pcauset[name=Options_pcauset_permu]{4,2,7,6,1,5,3}}
& \multirow{4}{5em}{%
  \causetsDrawPermutationtrue \causetsDrawVLabelsfalse \rcauset[name=Options_rcauset_permu]{4,2,7,6,1,5,3}{2/5}}
\\
  shows permutations without v-labels
\\
  (\lstinline§\causetsDrawVLabelstrue§ activates v-labels)
\\
  (\lstinline§\causetsDrawVLabelsfalse§ deactivates v-labels)
\\\midrule\midrule
  \lstinline§\usepackage[labeled]{causets}§ shows labeled events
& \multirow{3}{5em}{%
  \causetsDrawLabelstrue \pcauset[name=Options_pcauset_labeled]{4,2,7,6,1,5,3}}
& \multirow{3}{5em}{%
  \causetsDrawLabelstrue \rcauset[name=Options_rcauset_labeled]{4,2,7,6,1,5,3}{2/5}}
\\
  (\lstinline§\causetsDrawLabelstrue§ activates labels)
\\
  (\lstinline§\causetsDrawLabelsfalse§ deactivates labels)
\\\midrule\midrule
  \lstinline§\usepackage[continuous]{causets}§ allows links to cross over events.
  Link interruptions (default) only affect the \lstinline§\causet§ command and ``restyled'' links of \lstinline§\rcauset§, but not the examples shown on the right.
& \multirow{6}{5em}{%
  \causetsBreakLinkstrue \pcauset[name=Options_pcauset_continuous]{4,2,7,6,1,5,3}}
& \multirow{6}{5em}{%
  \causetsBreakLinkstrue \rcauset[name=Options_rcauset_continuous]{4,2,7,6,1,5,3}{2/5}}
\\
  Details on interrupted (broken) links are given below this table.
\\\midrule
  \lstinline§\usepackage[caps]{causets}§ sets caps as link tips
& \multirow{2}{5em}{%
  \pcauset[name=Options_pcauset_caps, cap links]{4,2,7,6,1,5,3}}
& \multirow{2}{5em}{%
  \rcauset[name=Options_rcauset_caps, cap links]{4,2,7,6,1,5,3}{2/5}}
\\
\\\midrule
  \lstinline§\usepackage[arrows]{causets}§ sets arrows (rounded stealth) as link tips
& \multirow{2}{5em}{%
  \pcauset[name=Options_pcauset_arrows, arrow links]{4,2,7,6,1,5,3}}
& \multirow{2}{5em}{%
  \rcauset[name=Options_rcauset_arrows, arrow links]{4,2,7,6,1,5,3}{2/5}}
\\\midrule
  \lstinline§\usepackage[unlinked]{causets}§ does not draw links
& \multirow{3}{5em}{%
  \causetsDrawLinksfalse \pcauset[name=Options_pcauset_unlinked]{4,2,7,6,1,5,3}}
& \multirow{3}{5em}{%
  \causetsDrawLinksfalse \rcauset[name=Options_rcauset_unlinked]{4,2,7,6,1,5,3}{2/5}}
\\
  (\lstinline§\causetsDrawLinkstrue§ actives links)
\\
  (\lstinline§\causetsDrawLinksfalse§ deactivates links)
\\\pagebreak%\midrule
  \lstinline§\usepackage[tiny]{causets}§ for tiny diagrams
& \multirow{2}{5em}{%
  \pcauset[name=Options_pcauset_tiny, tiny]{4,2,7,6,1,5,3}}
& \multirow{2}{5em}{%
  \rcauset[name=Options_rcauset_tiny, tiny]{4,2,7,6,1,5,3}{2/5}}
\\
  (\lstinline§\tikzcausetsset{tiny}§ sets tiny sizes)
\\\midrule
  \lstinline§\usepackage[smaller]{causets}§ for very small diagrams
& \multirow{2}{5em}{%
  \pcauset[name=Options_pcauset_verysmall, very small]{4,2,7,6,1,5,3}}
& \multirow{2}{5em}{%
  \rcauset[name=Options_rcauset_verysmall, very small]{4,2,7,6,1,5,3}{2/5}}
\\
  (\lstinline§\tikzcausetsset{very small}§ sets very small sizes)
\\\midrule
  \lstinline§\usepackage[small]{causets}§ for small diagrams
& \multirow{2}{5em}{%
  \pcauset[name=Options_pcauset_small, small]{4,2,7,6,1,5,3}}
& \multirow{2}{5em}{%
  \rcauset[name=Options_rcauset_small, small]{4,2,7,6,1,5,3}{2/5}}
\\
  (\lstinline§\tikzcausetsset{small}§ sets small sizes)
\\\midrule
  For comparison, here are the normal sized causets.
& \multirow{2}{5em}{%
  \pcauset[name=Options_pcauset, normal]{4,2,7,6,1,5,3}}
& \multirow{2}{5em}{%
  \rcauset[name=Options_rcauset, normal]{4,2,7,6,1,5,3}{2/5}}
\\
  (\lstinline§\tikzcausetsset{normal}§ sets normal sizes)
\\\midrule
  \lstinline§\usepackage[large]{causets}§ for large diagrams
& \multirow{3}{5em}{%
  \pcauset[name=Options_pcauset_large, large]{4,2,7,6,1,5,3}}
& \multirow{3}{5em}{%
  \rcauset[name=Options_rcauset_large, large]{4,2,7,6,1,5,3}{2/5}}
\\
  (\lstinline§\tikzcausetsset{large}§ sets large sizes)
\\[1.3em]\midrule
  \lstinline§\usepackage[larger]{causets}§ for very large diagrams
& \multirow{3}{5em}{%
  \pcauset[name=Options_pcauset_verylarge, very large]{4,2,7,6,1,5,3}}
& \multirow{3}{5em}{%
  \rcauset[name=Options_rcauset_verylarge, very large]{4,2,7,6,1,5,3}{2/5}}
\\
  (\lstinline§\tikzcausetsset{very large}§ sets very large sizes)
\\[2.1em]\midrule
  \lstinline§\usepackage[huge]{causets}§ for huge diagrams
& \multirow{4}{5em}{%
  \pcauset[name=Options_pcauset_huge, huge]{4,2,7,6,1,5,3}}
\\
  (\lstinline§\tikzcausetsset{huge}§ sets huge sizes)
\\
  Details on size options are given in \autoref{sec:Sizes}.
\\[2.5em]\midrule\midrule
  \lstinline§\usepackage[black]{causets}§ for black and white causets
& \multirow{2}{5em}{%
  \pcauset[name=Options_pcauset_black, black colors]{4,2,7,6,1,5,3}}
& \multirow{2}{5em}{%
  \rcauset[name=Options_rcauset_black, black colors]{4,2,7,6,1,5,3}{2/5}}
\\
  (\lstinline§\tikzcausetsset{black colors}§ activates the option)
\\\midrule
  \lstinline§\usepackage[gray]{causets}§ for grey scale causets (default)
& \multirow{3}{5em}{%
  \pcauset[name=Options_pcauset_gray, gray colors]{4,2,7,6,1,5,3}}
& \multirow{3}{5em}{%
  \rcauset[name=Options_rcauset_gray, gray colors]{4,2,7,6,1,5,3}{2/5}}
\\
  (\lstinline§\tikzcausetsset{gray colors}§ activates the option)
\\\midrule
  \lstinline§\usepackage[blue]{causets}§ for blue causets
& \multirow{2}{5em}{%
  \pcauset[name=Options_pcauset_blue, blue colors]{4,2,7,6,1,5,3}}
& \multirow{2}{5em}{%
  \rcauset[name=Options_rcauset_blue, blue colors]{4,2,7,6,1,5,3}{2/5}}
\\
  (\lstinline§\tikzcausetsset{blue colors}§ activates the option)
\\\midrule
  \lstinline§\usepackage[neon]{causets}§ for brightly colored causets
& \multirow{3}{5em}{%
  \pcauset[name=Options_pcauset_neon, neon colors]{4,2,7,6,1,5,3}}
& \multirow{3}{5em}{%
  \rcauset[name=Options_rcauset_neon, neon colors]{4,2,7,6,1,5,3}{2/5}}
\\
  (\lstinline§\tikzcausetsset{neon colors}§ activates the option)
\\
  Details on color options are given in \autoref{sec:Colors}.
\\\midrule%\midrule
  \lstinline§\usepackage[spatial]{causets}§ shows dashed lines between spatially separated events (which is a secondary partial order for the causets drawn with \lstinline§\pcauset§).
  This option only affects the \lstinline§\pcauset§ and \lstinline§\rcauset§ commands, but not the \lstinline§\causet§ command.
& \multirow{7}{5em}{%
  \pcauset[name=Options_pcauset_spatial, spatially linked]{4,2,7,6,1,5,3}}
& \multirow{7}{5em}{%
  \rcauset[name=Options_rcauset_spatial, spatially linked]{4,2,7,6,1,5,3}{2/5}}
\\
  (\lstinline§\causetsDrawSpatialLinkstrue§ activates the option)
\\
  (\lstinline§\causetsDrawSpatialLinksfalse§ deactivates the option)
\\\midrule
  \lstinline§\usepackage[external]{causets}§ loads the \lstinline§external§ library, sets the external file name prefix to ``\lstinline§causets/§'', and enables the use of causet names for the external file names.
  (This feature has to be loaded as option in the preamble not later in the document.)
& \multirow{6}{5em}{%
  \pcauset[name=Options_pcauset]{4,2,7,6,1,5,3}}
& \multirow{6}{5em}{%
  \rcauset[name=Options_rcauset]{4,2,7,6,1,5,3}{2/5}}
\\
  For details on externalization of causets, see \autoref{sec:ExternalCausets}.
\\\bottomrule
\end{longtable}

By default, the links in a diagram are interrupted if they cross over another event (exactly over the event centre).
Any such crossing of links over events can only occur for the links explicitly specified for the \lstinline§\causet§ command or the locally restyled links of the \lstinline§\rcauset§ command, but not for the links drawn by \lstinline§\pcauset§ or automatically drawn links by \lstinline§\rcauset§.
This feature is activated by default (\lstinline§\causetsBreakLinkstrue§) and can be  deactivated with \lstinline§\causetsBreakLinksfalse§, or with the option \lstinline§continuously linked§.

For example, here is a causet that embeds in 3-dimensional but not in 2-dimensional Minkowski spacetime.
This causet has one event (0) in the centre that is linked to events -3 and 3 but not to events -6 and 6, while a link (blue) from -6 to 6 crosses over it.
\begin{lstlisting}
\usepackage[larger]{causets}
\tikzcausetsset{labels={right, at=east}}
... \begin{document} ...
\causet[brokenly linked]{-1,2,-5,-7,4,-3,-6,0,6,3,-4,7,5,-2,1} {-7/-6,-7/4,-6/-4,-6/6/blue!50!cyan,-5/-4,-5/-3,-4/-2,-4/7, -3/-2,-3/0,-2/1,-1/0,-1/2,0/1,0/3,2/3,2/4,3/5,4/5,4/6,6/7}
\causet[continuously linked]{-1,2,-5,-7,4,-3,-6,0,6,3,-4,7,5,-2,1} {-7/-6,-7/4,-6/-4,-6/6/blue!50!cyan,-5/-4,-5/-3,-4/-2,-4/7, -3/-2,-3/0,-2/1,-1/0,-1/2,0/1,0/3,2/3,2/4,3/5,4/5,4/6,6/7}
\end{lstlisting}
\begin{center}
  \causet[name=BrokenlyLinkedExample_verylarge, very large, labels={right, at=east}]{-1,2,-5,-7,4,-3,-6,0,6,3,-4,7,5,-2,1}{-7/-6,-7/4,-6/-4,-6/6/blue!50!cyan,-5/-4,-5/-3,-4/-2,-4/7,-3/-2,-3/0,-2/1,-1/0,-1/2,0/1,0/3,2/3,2/4,3/5,4/5,4/6,6/7}
  \hspace{1.5cm}
  \causet[name=ContinuouslyLinkedExample_verylarge, very large, labels={right, at=east}, continuously linked]{-1,2,-5,-7,4,-3,-6,0,6,3,-4,7,5,-2,1}{-7/-6,-7/4,-6/-4,-6/6/blue!50!cyan,-5/-4,-5/-3,-4/-2,-4/7,-3/-2,-3/0,-2/1,-1/0,-1/2,0/1,0/3,2/3,2/4,3/5,4/5,4/6,6/7}
\end{center}
Note that the links are drawn in the order given by the second argument.
Similar results are obtained with the following \lstinline§\rcauset§ commands (since version 1.4) 
\begin{lstlisting}
\rcauset[brokenly linked]{-1,2,-5,-7,4,-3,-6,0,6,3,-4,7,5,-2,1} {-7/-3,-6/0,-5/4,-4/5,0/6,3/7,-6/6/blue!50!cyan}
\rcauset[continuously linked]{-1,2,-5,-7,4,-3,-6,0,6,3,-4,7,5,-2,1} {-7/-3,-6/0,-5/4,-4/5,0/6,3/7,-6/6/blue!50!cyan}
\end{lstlisting}
where all pairs of integers in the second argument are links to be removed (by default, get the local style \lstinline§draw=none§).
All links with a local style specified (here the last link only) are drawn in the order they appear after all automatic links have been drawn.
Local styles are explained in \autoref{sec:LocalStyles} in more detail.

All main commands, the short hand macros (see \autoref{sec:ShortHandMacros}), and the command \lstinline§\causetfile§ (see \autoref{sec:ExternalCausets}) add a small padding to the left and right of the diagram for a better spacing within text and mathematical expressions.
The padding is adjustable with \lstinline§padding=§\PH\ and stored in the macro \lstinline§\causets@Padding§ (by default, it is \lstinline§\thinspace§).


\section{Changing the options for individual diagrams}
\label{sec:ShortHandMacros}

Most of the package options introduced in the section before are also defined as keys that can be specified in the optional argument of the three main macros \lstinline§\pcauset§, \lstinline§\rcauset§ and \lstinline§\causet§.

Additionally, the package has short hand macros to switch on labels, the permutation grid, or both (\lstinline§\causetsDrawLabelstrue§, \lstinline§\causetsDrawPermutationtrue§, or \lstinline§\tikzcausetsset{ labeled, show permutation}§) to help compile diagrams.
Since package version 1.5, these short hand macros ending in \lstinline§L§, \lstinline§P§ and \lstinline§X§ are depreciated, because diagrams can now be designed and exported to \LaTeX\ macros with the \href{https://c-minz.github.io/assets/html/proset-editor.html}{PrOSET editor}.
To use these short hand macros nevertheless, add the following lines to the preamble after importing the package with \lstinline§\usepackage{causets}§:
\begin{lstlisting}
\providecommand*{\pcausetP}[2][]{%
{\causetsDrawPermutationtrue\causetsDrawLabelsfalse
\pcauset[#1]{#2}}}
\providecommand*{\pcausetL}[2][]{%
{\causetsDrawPermutationfalse\causetsDrawLabelstrue
\pcauset[#1]{#2}}}
\providecommand*{\pcausetX}[2][]{%
{\causetsDrawPermutationtrue\causetsDrawLabelstrue
\pcauset[#1]{#2}}}
\providecommand*{\causetP}[3][]{%
{\causetsDrawPermutationtrue\causetsDrawLabelsfalse
\causet[#1]{#2}{#3}}}
\providecommand*{\causetL}[3][]{%
{\causetsDrawPermutationfalse\causetsDrawLabelstrue
\causet[#1]{#2}{#3}}}
\providecommand*{\causetX}[3][]{%
{\causetsDrawPermutationtrue\causetsDrawLabelstrue
\causet[#1]{#2}{#3}}}
\providecommand*{\rcausetP}[3][]{%
{\causetsDrawPermutationtrue\causetsDrawLabelsfalse
\rcauset[#1]{#2}{#3}}}
\providecommand*{\rcausetL}[3][]{%
{\causetsDrawPermutationfalse\causetsDrawLabelstrue
\rcauset[#1]{#2}{#3}}}
\providecommand*{\rcausetX}[3][]{%
{\causetsDrawPermutationtrue\causetsDrawLabelstrue
\rcauset[#1]{#2}{#3}}}
\end{lstlisting}

To add labels or the permutation grid to a diagram, specify the respective option in the optional argument of the macro:
\begin{table}[h!]
  \centering
  \begin{tabular*}{\textwidth}{p{0.35\textwidth}p{0.60\textwidth}}
    \toprule
    command with options
  & functionality
  \\\midrule
    \lstinline§\pcauset[labeled]{1,2,4,3}§
  & Draws a diagram of a 2-order from a permutation (here 1,2,4,3) and shows labels for the elements (\lstinline§\causetsDrawLabelstrue§). The output for this example is \pcauset[name=Macro_L, labeled]{1,2,4,3}.
  \\
    \lstinline§\rcauset[labeled]{...}{...}§
  & Similar for a 2-order with removed links.
  \\
    \lstinline§\causet[labeled]{...}{...}§
  & Similar for a generic diagram.
  \\\midrule
    \lstinline§\pcauset[permutation]{4,1,2,3}§
  & Draws a diagram of a 2-order from a permutation (here 4,1,2,3) and shows the permutation grid (\lstinline§\causetsDrawPermutationtrue§). The output for this example is \pcauset[name=Macro_P, permutation]{4,1,2,3}.
  \\
    \lstinline§\rcauset[permutation]{...}{...}§
  & Similar for a 2-order with removed links.
  \\
    \lstinline§\causet[permutation]{...}{...}§
  & Similar for a generic diagram.
  \\\midrule
    \multicolumn{2}{l}{These options can be combined (also with other style keys, see below).}
  \\\bottomrule
  \end{tabular*}
  \caption{\label{tab:MainCommandsWithOptions} Main commands with options.}
\end{table}

The short hand macros \lstinline§\causetFence§ and \lstinline§\causetCrown§ have been removed in version 1.5, since diagrams of fences, crowns, polygons and other posets are supported by the \href{https://c-minz.github.io/assets/html/proset-editor.html}{PrOSET editor} and can be exported as \LaTeX\ macros.


\section{Labeling and replacing events (also to represent infinite causets)}
\label{sec:LabelingReplacing}

Since version v1.3 of the package, it is possible to relabel and replace causet events.
These features are useful for labelling events arbitrarily, and drawing diagrams of infinite causets using ellipsis.

By default, all events get named and labeled by the integers given in the arguments of the commands.
For example, \lstinline§\pcauset[labeled]{0,2,1}§ creates the diagram \pcauset[labeled]{0,2,1} where the event notes are named \lstinline§(E0)§, \lstinline§(E2)§, \lstinline§(E1)§ (which are always created), respectively, while the label nodes have the names \lstinline§(EL0)§, \lstinline§(EL2)§, \lstinline§(EL1)§ (which are only created with the \lstinline§labeled§ option).
If the permutation is displayed as well, the $u$- and $v$-coordinate labels are the nodes \lstinline§(EUL§\PH\lstinline§)§ and \lstinline§(EVL§\PH\lstinline§)§, with \PH\ taking on the values $\{0, 2, 1 \}$.

To offset the names of all causet events by an integer amount, use the key-value pair \lstinline§offset=§\PH\ to adjust the naming and labelling of events and get distinct event names, while the same integers are used in the command arguments.
Consider the following example.
\begin{lstlisting}
\begin{align*}
  \tikzcausetsset{large}
  \cdots\quad
  \pcauset[permutation, offset=-12]{0,2,1,3}\quad\cdots\quad
  \pcauset[labeled]{0,2,1,3}\quad\cdots\quad
  \pcauset[labeled, offset=12]{0,2,1,3}\quad\cdots
\end{align*}
\end{lstlisting}
\vspace{-1ex}
\begin{align*}
  \tikzcausetsset{large}
  \cdots\quad
  \pcauset[name=Diamond_permoffset, permutation, offset=-12]{0,2,1,3}\quad\cdots\quad
  \pcauset[name=Diamond_labeled, labeled]{0,2,1,3}\quad\cdots\quad
  \pcauset[name=Diamond_labeledoffset, labeled, offset=12]{0,2,1,3}\quad\cdots
\end{align*}
Here, the three commands have the same integer argument \lstinline§{0,2,1,3}§, but the events are named with the specified offsets and the labels are adjusted accordingly.
In this way, it will be possible to address the event (and label) nodes of the (sub-)causets distinctively within a larger TikZ picture.
For more details on how to draw causets within a TikZ picture, see \autoref{sec:TikZ}.

When you (only) want to change the labelling of an event to \PH, add a slash and \lstinline§label=§\PH\ directly after the event integer in the first command argument.
For example, the causet \pcauset{2,1,3} has six different labellings by (distinct) integers from the set $\{ 0, 1, 2 \}$,
%\pagebreak
\begin{lstlisting}
\begin{align}
  \text{order-preserving:} &&
  L_{\mathrm{op}} &=
  \left\{
    \pcauset[labeled]{1,0,2},
    \pcauset[labeled]{1/label=0,0/label=1,2}
  \right\}
  , \\
  \text{not order-preserving:} &&
  L_{\mathrm{nop}} &=
  \left\{
    \pcauset{1/label=2,0/label=1,2/label=0},
    \pcauset[labeled]{1,0/label=2,2/label=0},
    \pcauset[labeled]{1/label=2,0,2/label=1},
    \pcauset{1/label=0,0/label=2,2/label=1}
  \right\}
  .
\end{align}
\end{lstlisting}
\vspace{-1ex}
\begin{align}
  \text{order-preserving:} &&
  L_{\mathrm{op}} &=
  \left\{
    \pcauset[name=Wedge_labeled102, labeled]{1,0,2},
    \pcauset[name=Wedge_labeled012, labeled]{1/label=0,0/label=1,2}
  \right\}
  , \\
  \text{not order-preserving:} &&
  L_{\mathrm{nop}} &=
  \left\{
    \pcauset[name=Wedge_labeled210, labeled]{1/label=2,0/label=1,2/label=0},
    \pcauset[name=Wedge_labeled120, labeled]{1,0/label=2,2/label=0},
    \pcauset[name=Wedge_labeled201, labeled]{1/label=2,0,2/label=1},
    \pcauset[name=Wedge_labeled021, labeled]{1/label=0,0/label=2,2/label=1}
  \right\}
  .
\end{align}

You may use any text as a label.
Longer text labels should be written in a \TeX\ group \lstinline§{...}§.
Here is an example
\begin{lstlisting}
\pcauset[large]{2/label=$-\infty$,6,5,7,3/label={Text and $maths$},4/label=-1}
\end{lstlisting}
\vspace{-1ex}
\begin{center}
  \pcauset[name=RelabeledEventsExample_large, large]{2/label=$-\infty$,6,5,7,3/label={Text and $maths$},4/label=-1}
\end{center}

Notice that replaced labels will always be visible, even if labels are deactivated (\lstinline§\causetsDrawLabelsfalse§) as in this example.
To change the style of the replaced labels, add the key-value pair
\lstinline§replaced labels=§\PH, which extends the style of standard labels.

Similarly to the replacement of labels, you can replace event nodes by using a slash followed by \lstinline§event=§\PH.
This feature may have its main application for the representation of infinite causets, for example, the code
\begin{lstlisting}
% Define ellipsis rotated by #1 degrees:
\newcommand{\rdots}[1][0]{\rotatebox{#1}{...}}
...
% Draw infinite causet with ellipsis
\pcauset[large, replaced labels={below, at=south}, replaced events={text scale=1}]
  {-2/{label={$\downarrow$ continues infinitely $\downarrow$}, event={\rdots[90]}}, -1,0,1,16,14,15,11,12,13,7,8,9,10, 2/event={\rdots[10]},3,4/event={~},5,6/event={\rdots[-10]}}
\end{lstlisting}
yields the diagram
\begin{center}
  \newcommand{\rdots}[1][0]{\rotatebox{#1}{...}}
  \pcauset[name=ReplacedEventsExample_large, large, replaced labels={below, at=south}, replaced events={text scale=1}]
  {-2/{label={$\downarrow$ continues infinitely $\downarrow$}, event={\rdots[90]}}, -1,0,1,16,14,15,11,12,13,7,8,9,10, 2/event={\rdots[10]},3,4/event={~},5,6/event={\rdots[-10]}}
\end{center}
Here, three events are replaced by ellipsis with different rotations, and one event is replaced by an empty node (\lstinline§~§).
The style of the replaced events is specified via the key \lstinline§replaced labels=§\PH\ -- where \PH\ is \lstinline§{text scale=1}§ in this example.
This example also shows how to relabel and replace simultaneously (see the bottom-most event).

The style and the position of all event labels is set with \lstinline§labels=§\PH, while \lstinline§replaced labels=§\PH\ extends this style.
As shown in the previous example, the position of labels is defined with a key word like \lstinline§left§, \lstinline§right§, \lstinline§above§, \lstinline§below§, etc.\ (see also the TikZ manual) relative to the position given by the key \lstinline§at=§\PH.
The \lstinline§at§ key holds a coordinate of the event note.
The default positioning is \lstinline§below left, at=south west§.


\section{Changing sizes and fonts (for mathematical expressions)}
\label{sec:Sizes}

The pre-defined size styles have the following scaling with respect to the normal size:\vspace{-1ex}
\begin{itemize}\itemsep=-1ex
  \item \lstinline§tiny§ is $\frac{1}{3}$ times the normal size
  \item \lstinline§very small§ is $\frac{4}{9}$ times the normal size
  \item \lstinline§small§ is $\frac{2}{3}$ times the normal size
  \item \lstinline§large§ is $\frac{3}{2}$ times the normal size
  \item \lstinline§very large§ is $\frac{9}{4}$ times the normal size
  \item \lstinline§huge§ is $3$ times the normal size
\end{itemize}
Apart from the pre-defined sizes, a causet can be scaled to any size using \lstinline§size unit=§\PH\ (which is equal to the tile size, \lstinline§tile size=§\PH).
The normal size unit has the value \lstinline§0.9ex§.

I recommend to change the size of a causet when used in indices or limits for mathematical expression.
For a (first level) sub-script in a summation, you may use the small size,
\begin{lstlisting}
\begin{equation}
    \sum_{C \in \tikzcausetsset{small}
      \Bigl\{ \pcauset{1,2,3}, \pcauset{1,3,2,4}, \pcauset{1,4,3,2,5}, \pcauset{1,5,4,3,2,6} \Bigr\}} | C |
  = \left| \pcauset{1,2,3} \right|
    + \left| \pcauset{1,3,2,4} \right|
    + \left| \pcauset{1,4,3,2,5} \right|
    + \left| \pcauset{1,5,4,3,2,6} \right|
\end{equation}
\end{lstlisting}
\begin{equation}
    \sum_{C \in \tikzcausetsset{small}
      \Bigl\{
        \pcauset[name=3Chain_small]{1,2,3},
        \pcauset[name=Diamond_small]{1,3,2,4},
        \pcauset[name=Pure3Diamond_small]{1,4,3,2,5},
        \pcauset[name=Pure4Diamond_small]{1,5,4,3,2,6}
      \Bigr\}}
    | C |
  = \left| \pcauset[name=3Chain]{1,2,3} \right|
    + \left| \pcauset[name=Diamond]{1,3,2,4} \right|
    + \left| \pcauset[name=Pure3Diamond]{1,4,3,2,5} \right|
    + \left| \pcauset[name=Pure4Diamond]{1,5,4,3,2,6} \right|
\end{equation}

Like any other options, sizes can also be specified in the optional argument of a single causet diagram or with \lstinline§\tikzcausetsset{...}§ for the current scope.

If you need to set the sizes of individual components of a causet, use the keys \vspace{-1ex}
\begin{itemize}\itemsep=-1ex
  \item \lstinline§tile size=§\PH\ to store \PH\ in the macro \lstinline§\causetTileSize§ as the size of the tiles in the permutation (this is equivalent to setting the size unit),
  \item \lstinline§region line width=§\PH\ to set the thickness for the line surrounding the permutation region,
  \item \lstinline§grid line width=§\PH\ to set the line thickness of the permutation grid,
  \item \lstinline§event size=§\PH\ to set the diameter of the events,
  \item \lstinline§event outline=§\PH\ to set the thickness of the transparent line around the events,
  \item \lstinline§link width=§\PH\ to set the link thickness, and
  \item \lstinline§broken link gap=§\PH\ to set the link gap before and after an event that interrupts a link.
\end{itemize}

The text of all labels is sized independently to the other components of the causet diagrams.
To adjust the text typesetting, use \vspace{-1ex}
\begin{itemize}\itemsep=-1ex
  \item \lstinline§text font=§\PH\ to set the font used for all the text labels -- for example, \lstinline§text font=\fontsize{13}{15.6}\selectfont§\ sets the font size to 13pt (and the baseline skip to 1.2 times this font size),
  \item \lstinline§text scale=§\PH\ to set the scaling factor of all the text labels (relative to the font size).
\end{itemize}
The pre-defined size styles use the following font sizes, \vspace{-1ex}
\begin{itemize}\itemsep=-1ex
  \item \lstinline§tiny§ is typeset with \lstinline§\tiny§ (scaled by 0.30)
  \item \lstinline§very small§ is typeset with \lstinline§\tiny§ (scaled by 0.40)
  \item \lstinline§small§ is typeset with \lstinline§\scriptsize§ (scaled by 0.43)
  \item \lstinline§normal§ is typeset with \lstinline§\footnotesize§ (scaled by 0.56)
  \item \lstinline§large§ is typeset with \lstinline§\small§ (scaled by 0.75)
  \item \lstinline§very large§ is typeset with \lstinline§\normalsize§ (scaled by 1.02)
  \item \lstinline§huge§ is typeset with \lstinline§\Large§ (scaled by 0.97)
\end{itemize}

Below is an example for a diagram drawn with some sizes defined manually:
\begin{lstlisting}
\pcauset[labeled, tile size=2ex, event size=1ex, link width=0.3ex, text scale=1]{13,8,14,9,3,15,12,1,6,16,5,11,7,2,10,4}
\end{lstlisting}
\begin{center}
  \pcauset[name=Example_resized, labeled, tile size=2ex, event size=1ex, link width=0.3ex, text scale=1]{13,8,14,9,3,15,12,1,6,16,5,11,7,2,10,4}
\end{center}
\vspace{1ex}


\section{Changing colors}
\label{sec:Colors}

Colors can be set with the following keys: \vspace{-1ex}
\begin{itemize}\itemsep=-1ex
  \item \lstinline§region color=§\PH\ (or \lstinline§region color=§\PH) for the frame of the permutation grid
  \item \lstinline§grid color=§\PH\ (or \lstinline§grid color=§\PH) for the lines of the permutation grid
  \item \lstinline§tile color=§\PH\ (or \lstinline§tile color=§\PH) for the occupied tiles
  \item \lstinline§ulabel color=§\PH\ (or \lstinline§ulabel color=§\PH) for the $u$ labels
  \item \lstinline§vlabel color=§\PH\ (or \lstinline§vlabel color=§\PH) for the $v$ labels
  \item \lstinline§event color=§\PH\ (or \lstinline§event color=§\PH) for the events
  \item \lstinline§label color=§\PH\ (or \lstinline§label color=§\PH) for the event labels
  \item \lstinline§link color=§\PH\ (or \lstinline§link color=§\PH) for the links
  \item \lstinline§spatial link color=§\PH\ (or \lstinline§spatial link color=§\PH) for the spatial links.
\end{itemize}
When using any of these key-value pairs in an optional arguments of the causet macros, they apply to that diagram.
To change colors within a scope or the entire document, use the \lstinline§\tikzcausetsset§ macro, for example
\begin{lstlisting}
\tikzcausetsset{event color=purple, link color=cyan}
\end{lstlisting}
changes the event color to purple and the link color to cyan.

For the pre-defined color schemes, use the keys \lstinline§gray colors§ (or \lstinline§gray colors§, default), \lstinline§black colors§ (or \lstinline§black colors§, only black and white), \lstinline§blue colors§ (or \lstinline§blue colors§, blue color tones), or \lstinline§neon colors§ (or \lstinline§neon colors§, bright colors).
These keys set all the colors listed above to pre-defined values.


\section{Changing the styles of individual events and links}
\label{sec:LocalStyles}

The full supported formats of the three main commands are
\\[1ex]
\lstinline§\pcauset[§\PH[causet style]\lstinline§]{§\PH[index]\lstinline§/§\PH[event style]\lstinline§,...}§
\\[1ex]
\lstinline§\rcauset[§\PH[causet style]\lstinline§]{§\PH[index]\lstinline§/§\PH[event style]\lstinline§,...}{§\PH[unlink from]\lstinline§/§\PH[unlink to]\lstinline§,...,§
\\\PH[link from]\lstinline§/§\PH[link to]\lstinline§/§\PH[link style]\lstinline§,...}§
\\[1ex]
\lstinline§\causet[§\PH[causet style]\lstinline§]{§\PH[index]\lstinline§/§\PH[event style]\lstinline§,...}{§\PH[link from]\lstinline§/§\PH[link to]\lstinline§/§\PH[link style]\lstinline§,...}§
\\[1ex]
and similarly for all short hand macros as described in \autoref{sec:ShortHandMacros}.
The style values are all optional, where \PH[causet style] is applied to that causet only, \PH[event style] is applied to a single event, and \PH[link style] is applied to a single link.

The feature to apply styles only to individual events and links is to highlight or modify subsets of a causet, for example, by using different colors: 
\begin{lstlisting}
\rcauset[labeled, large, subset A/.style={red, dotted}, subset B/.style=blue, replaced labels={text scale=1, at=east, right}]{2/{subset A, label=event $a$}, 5/subset B, 1, 3/{subset A, label=$b$, replaced labels=orange}, 4/subset B, 6/subset B}{2/3/subset A, 4/6/subset B, 5/6/subset B}
\end{lstlisting}
\vspace{-1ex}
\begin{center}
  \rcauset[name=Example_locallystyled, labeled, large, subset A/.style={red, dotted}, subset B/.style=blue, replaced labels={text scale=1, at=east, right}]{2/{subset A, label=event $a$}, 5/subset B, 1, 3/{subset A, label=$b$, replaced labels=orange}, 4/subset B, 6/subset B}{2/3/subset A, 4/6/subset B, 5/6/subset B}
\end{center}
Note that \lstinline§label=event $a$§ and \lstinline§label=$b$§ adds (replaced) labels $a$ and $b$, respectively, but their style is not affected by \lstinline§subset A§.
To change the style of the labels, we have to use the \lstinline§replaced labels§ key, see also \autoref{sec:LabelingReplacing}.


\section{Externalisation and standalone causets}
\label{sec:ExternalCausets}

For any document that contains many (large) causet diagrams or the same causets that are used repeatedly, the compilation time can be reduced by moving the graphics to external files using the externalisation library of TikZ or \lstinline§standalone§ files.

The externalisation feature of TikZ provides the tools to automatically externalise all causet diagrams and only recompile them when they are changed in the document.
To enable this feature, use the \lstinline§external§ option when loading the package and make sure that the document is compiled with the flag 
\begin{lstlisting}
--shell-escape
\end{lstlisting}
The \lstinline§external§ option loads the \lstinline§external§ library, sets the \lstinline§prefix§ to add ``\lstinline§causets/§'' before each external file, and calls \lstinline§\causetsNameExternaltrue§ to use the manually specified names for external file names.
Any causet can be manually named by providing the name key-value pair \lstinline§name=§\PH\ in the optional parameter of a causet command.
As an example, the inline code 
\begin{lstlisting}
\pcauset[name=Vee, alt={Vee}]{1,3,2}
\end{lstlisting}
yields the causet \pcauset[name=Vee, alt={Vee}]{1,3,2} and creates an external pdf file with the name \lstinline§causets/Vee.pdf§ relative to the main tex file.
The alternative text \lstinline§alt={§\PH\lstinline§}§ may be the same as name for short names (like here), but the file names are usually shorter.

I recommend to always name causets, even if externalisation is not used.
In this way, it is easier to read the source code and switch to externalising at a later point more easily.
Note that the name of a causet does not have to be unique (especially if it is used repeatedly throughout the document), but you may give different names to causets with different style options to avoid unwanted overwrites.
For a repeated causet in the document, either use the same code or the \lstinline§\causetfile§ macro.
For example, \lstinline§\pcauset[name=N]{2,4,1,3}§ can be repeated with \lstinline§\causetfile{N}§ to print the N causet \pcauset[name=N]{2,4,1,3}.
The macro \lstinline§\causetfile[#1]{#2}§ also accepts one optional argument \lstinline§[#1]§ and expands to
\begin{lstlisting}
\causets@Padding%
\includegraphics[#1]{\causets@NamePrefix#2}%
\causets@Padding
\end{lstlisting}
To redefine the prefix stored in \lstinline§\causets@NamePrefix§ and also set the \lstinline§external§ library prefix to the same value, use \lstinline§\tikzcausetsset{set prefix=causets/}§.
However, to set \lstinline§\causets@NamePrefix§ only for \lstinline§causets§ but not for other TikZ externalisation, use \lstinline§name prefix=§\PH.

If you are already loading the \lstinline§external§ library for other uses, you do not want to use the \lstinline§external§ option, but add the following to the document's preamble: 
\begin{lstlisting}
\usetikzlibrary{external}
...
\usepackage{causets}
\tikzcausetsset{set prefix=causets/, name external=true}
\end{lstlisting}
For externalising only those causets that are named manually, set 
\begin{lstlisting}
\tikzset{external/only named=true}
\end{lstlisting}
For switching externalisation on/off all together, the library provides the macros 
\begin{lstlisting}
\tikzexternaldisable
\tikzexternalenable
\end{lstlisting}
Please find further information on the \lstinline§external§ library in the TikZ manual.

Graphics may also be moved to standalone tex files manually and included with \lstinline§\causetfile§ or \lstinline§\includegraphics§.
For example, create a file named \lstinline§M.tex§ in the directory that was set to \lstinline§name prefix§ (by default, this is ``\lstinline§./§'') with the following code:
\begin{lstlisting}
\documentclass[tikz]{standalone}
\usepackage{causets}
\begin{document}
\pcauset{4,2,5,1,3}
\end{document}
\end{lstlisting}
The compiled diagram \pcauset[name=M, alt={M}]{4,2,5,1,3} is then included with the macro \lstinline§\causetfile[alt={M}]{M}§ (where \lstinline§alt§ is directly passed to \lstinline§\includegraphics§ to be processed with \LaTeXML).

More examples on larger standalone graphics are given in \autoref{sec:TikZ}.


\section{Style changes in detail}
\label{sec:StyleDetails}

In the optional argument of the causet macros, you may use other TikZ options to change the output of the macros, for example:
\begin{lstlisting}
\usepackage{causets}
... \begin{document} ...
A labeled causet with red-framed semi-transparent labels, \pcauset[labels={draw=red, fill=white, opacity=0.8, inner sep=1pt, scale=1.5}]{2,4,5,1,3}.
\end{lstlisting}
A labeled causet with red-framed semi-transparent labels, \pcauset[name=NDash_redframedlabels, labels={draw=red, fill=white, opacity=0.8, inner sep=1pt, scale=1.5}]{2,4,5,1,3}.

In the same way, it is possible to modify the existing styles of all parts of the diagrams, which means that the default drawing styles are extended by the options passed as value to these keys: \vspace{-1ex}
\begin{enumerate}\itemsep=-1ex
  \item \lstinline§region=§\PH\ shows the permutation (\lstinline§show permutation§) and appends to the style of the permutation frame,
  \item \lstinline§grid=§\PH\ shows the permutation (\lstinline§show permutation§) and appends to the style of the permutation grid,
  \item \lstinline§tiles=§\PH\ shows the permutation (\lstinline§show permutation§) and appends to the style of the occupied permutation tiles,
  \item \lstinline§events=§\PH\ appends to the style of the event nodes (graph vertices),
  \item \lstinline§links=§\PH\ shows the links (\lstinline§show links§) and appends to the style of the links (main graph edges),
  \item \lstinline§link starts=§\PH\ sets the starting line tip of each link,
  \item \lstinline§link ends=§\PH\ sets the ending line tip of each link,
  \item \lstinline§link pauses=§\PH\ sets the ending line tip of each link at an interruption,
  \item \lstinline§link resumes=§\PH\ sets the starting line tip of each link at an interruption,
  \item \lstinline§cap links§ sets the starting and ending line tip of each link to a (reversed) cap,
  \item \lstinline§arrow links§ sets the ending line tip of each link to a rounded, stealth arrow,
  \item \lstinline§spatial links=§\PH\ shows the spatial links (\lstinline§show spatial links§) and appends to the style of the spatial links (secondary graph edges),
  \item \lstinline§all labels=§\PH\ appends to the general style of all text labels (applies to the following three label types),
  \item \lstinline§labels=§\PH\ shows the event labels (\lstinline§show labels§) and appends to the style that applies only to the event labels,
  \item \lstinline§ulabels=§\PH\ shows the $u$ labels (\lstinline§show ulabels§) and appends to the style that applies only to the $u$ labels, and
  \item \lstinline§vlabels=§\PH\ shows the $v$ labels (\lstinline§show vlabels§) and appends to the style that applies only to the $v$ labels.
\end{enumerate}
In order to manually define the full style of the parts in the diagram -- not extending, but \emph{overwriting all} drawing options -- set the style of the following keys: \vspace{-1ex}
\begin{enumerate}\itemsep=-1ex
  \item \lstinline§every causet§ for the general style of the causet diagram (like \lstinline§baseline§, see below),
  \item \lstinline§every tile§ for the occupied permutation tiles,
  \item \lstinline§every event§ for the event nodes (graph vertices),
  \item \lstinline§every grid§ for the permutation grid,
  \item \lstinline§every region§ for the permutation region,
  \item \lstinline§every label base§ for all text labels,
  \item \lstinline§every ulabel§ for the permutation $u$ labels,
  \item \lstinline§every vlabel§ for the permutation $v$ labels,
  \item \lstinline§every link§ for the links (graph edges),
  \item \lstinline§every spatial link§ for the spacelike separations, and
  \item \lstinline§every label§ for the event labels.
\end{enumerate}
With the macro \lstinline§\tikzcausetsset{...}§, any of these styles can also be set in the preamble of the document.
So, for example,
\begin{lstlisting}
\usepackage{causets}
\tikzcausetsset{events={rectangle}, links={-Triangle Cap[]}}
... \begin{document} ...
\pcauset[large]{2,4,5,1,3}
\end{lstlisting}
will generate all causets with square nodes as events and triangle caps on the future (upper) link ends, like \pcauset[name=NDash_rectangleeventslarge, large, events={rectangle}, links={-Triangle Cap[]}]{2,4,5,1,3}.
\vspace{1ex}

By default, causets are placed such that a pre-defined coordinate point falls on the text baseline, \lstinline§baseline=(baseline point)§.
The baseline point is \lstinline§tile size§/$\sqrt{2}$ below the centre of the diagram.
You may adjust the baseline as for any TikZ graphic, for example,
\begin{lstlisting}
\pcauset[baseline=2mm]{2,4,5,1,3}
\end{lstlisting}
places the diagram centre $2\mathrm{mm}$ below the text base, \pcauset[name=NDash_baseline, baseline=2mm]{2,4,5,1,3}.
\vspace{1ex}


\section{Using this package in TikZ pictures}
\label{sec:TikZ}

Since the package is TikZ based, using a causet within a TikZ picture is simple.
Each of the three main commands is based on a draw command in TikZ that has the same name but starts with \lstinline§\draw...§.
The \lstinline§\draw§ macros, however, do not support an optional argument (since this can be specified directly in a TikZ picture) and they also do not have any short hand macros ending in \lstinline§P§, \lstinline§L§ or \lstinline§X§.
The \lstinline§\draw...§ do not add extra padding (\lstinline§\causets@Padding§) on the left and right of the graphic either.

The two following examples are given by external (standalone) TikZ graphics and included with \lstinline§\includegraphics{...}§.
More details on using causets in standalone files are given in \autoref{sec:ExternalCausets}.

Note that the output of the \lstinline§\draw§ macros has the point (0,0) in the centre, so in order to shift it, we may enclose it in a TikZ scope, for example:
\lstinputlisting{causets_example1.tex}
\begin{center}
  \includegraphics{causets_example1}
\end{center}

Note that this example also shows how to use the event nodes that are generated by the \lstinline§\drawpcauset§ macro.
The green arrow points to the node of the second causet event \lstinline§(E5)§.
The causet events, event labels, $u$-axis labels, and $v$-axis lables are the nodes \lstinline§(Ei)§, \lstinline§(ELi)§, \lstinline§(EULi)§, and \lstinline§(EVLi)§, respectively, where $\smash{i \in [ -1, 5 ]}$.

It is also possible to use multiple causets in more complicated graphics, like a tree for example, but note that whenever a causet is actually a text of a node within a TikZ picture (like in the following), we need to use the \lstinline§\pcauset§ (\lstinline§\rcauset§ or \lstinline§\causet§) commands without the \lstinline§draw§ prefix again:
\lstinputlisting{causets_example2.tex}
\begin{center}
  \includegraphics[scale=0.80]{causets_example2}
  (rescaled to 80\%)
\end{center}

\clearpage


\tikzexternaldisable


\section{Release notes}
\label{sec:ReleaseNotes}

\definecolor{XMLv1.5}{rgb}{0.44,0.12,0.6}
\tikzcausetsset{large, events={black!30}, links={black!30}, label color={black!40}}


\subsection[v1.5 (Butterfly)]{v1.5, 2025-02-24}

\subsubsection{New features}

\begin{itemize}\itemsep=-1ex
\item \versioncauset{v1-5}{\pcauset{1,5,3,6/{XMLv1.5, label=XML, labels={XMLv1.5, above=1ex, at=north}},2,4}}%
  Added support for \LaTeXML\ including the key \lstinline§alt={§\PH\lstinline§}§ to define an alternative text representing a diagram for screen readers.
\item Added references to a supporting online tool, the \href{https://c-minz.github.io/assets/html/proset-editor.html}{PrOSET editor}.
\end{itemize}

\subsubsection{Modifications and fixes}

\begin{itemize}\itemsep=-1ex
\item The short hand macros \lstinline§\pcausetL§, \lstinline§\pcausetP§, \lstinline§\pcausetX§, \lstinline§\rcausetL§, \lstinline§\rcausetP§, \\\lstinline§\rcausetX§, \lstinline§\causetL§, \lstinline§\causetP§ and \lstinline§\causetX§ are now depreciated.\\
Write \lstinline§\pcauset[labeled]§, \lstinline§\pcauset[permutation]§, \lstinline§\pcauset[permutation, labeled]§, etc. instead, or use the PrOSET editor to design diagrams.
\item Removed the short hand macros \lstinline§\causetFence§ and \lstinline§\causetCrown§.
\item Corrected typos in the manual.
\end{itemize}


\subsection[v1.4, 2023-03-06 (Vee-Diamond)]{v1.4, 2023-03-06}

\subsubsection{New features}

\begin{itemize}\itemsep=-1ex
\item \versioncauset{v1-4}{\rcauset[release/.style={black!40!cyan!85}]{1,5/release,3,2,4}{1/5/release}}%
  Second values in the sequence of the first argument: now modifies the style of individual events, the events are replaced with the key \lstinline§event=§\PH, and the labels are set with \lstinline§label=§\PH.
\item Third values in the sequence of the second argument of \lstinline§\causet§ and \lstinline§\rcauset§: to modify the style of individual links.
\item Broken links for restyled links of \lstinline§\rcauset§: restyled links can also be drawn between events that would have not been automatically linked, hence these links might now be broken up like the links of \lstinline§\causet§.
\item New key \lstinline§name=§\PH: to define a name of a causet for easier readability of the tex source code (and to be used as external file name when the corresponding package option has been activated).
\item New option \lstinline§external§: to load the \lstinline§external§ library of TikZ for automatic externalisation of all diagrams.
\item New key \lstinline§set prefix=§\PH: to pass a file name prefix that is combined with a causet name for the external files when using \lstinline§external§.
\item New key \lstinline§name external=§\PH[bool]: to activate/deactivate using the causet names for external files.
\item Main commands: padded by a thin space (adjustable with \lstinline§padding=§\PH) for a better spacing in text and math mode.
\end{itemize}

\subsubsection{Modifications and fixes}

\begin{itemize}\itemsep=-1ex
\item Third values in the sequence of the first argument: no longer supported.
\item Spatial links: are now drawn before (so on a lower layer than) links.
\item Style \lstinline§arrow links§: the arrow heads are now filled.
\item Macro \lstinline§\causetspath§: has been replaced by \lstinline§name prefix=§\PH.
\item Short-hand macro \lstinline§\causetCrown§: changed to take a single argument (and the optional style argument) and returns the same output as \lstinline§\causetClosedFence§ used to, which has been removed.
\end{itemize}

\subsection[v1.3.1, 2022-07-27 (Diamond)]{v1.3.1, 2022-07-27}
\subsubsection{Modifications and fixes}
\begin{itemize}\itemsep=-1ex
\item \versioncauset{v1-3-1}{\pcauset[replaced labels={left=0.5ex, at=west}]{1,3,2,4/label=.3}}%
  Automatic event labels: now correctly printed when using \lstinline§offset=§\PH.
\end{itemize}


\subsection[v1.3, 2022-05-23 (Da)]{v1.3, 2022-05-23}

\subsubsection{New features}

\begin{itemize}\itemsep=-1ex
\item %\versioncauset{v1-3}{\pcauset[replaced labels={left=0.5ex, at=west}]{1,4,2,3/label=.3}}%
  Integer sequences in the arguments: use a permutation of an interval $[ a, b ]$, where $a$ and $b$ do no longer have to be natural numbers but can be any integers ($a \leq b$) including 0 and negative numbers.
  These numbers name and label the events of the causet if the respective options are chosen.
\item Second values in the sequence of the first argument: to change the name and label of events.
\item New key \lstinline§offset=§\PH\ (0 by default): to define an integer shift for all events before they are named and labeled.
\item New style \lstinline§text font=§\PH\ (additionally to \lstinline§text scale=§\PH): to adjust the font style of text (labels), for example, to set the font size to 20pt (and a baseline skip of 24pt), use \lstinline§text font=\fontsize{20}{24}\selectfont§
\end{itemize}

\subsubsection{Modifications and fixes}

\begin{itemize}\itemsep=-1ex
\item Size options: all sizes are now scaled with respect to the normal size.
\item Event style: line thickness of the event outline has been corrected.
\item Size macros removed: \lstinline§\causetRegionLine§, \lstinline§\causetGridLine§, \lstinline§\causetEventSize§, \\ \lstinline§\causetLinkWidth§, and \lstinline§\causetBrokenLinkGap§.
  The respective values are now stored in PGF keys and are measured with respect to the size unit (stored in \lstinline§\causetTileSize§).
\item All package options: reduced to single words.
\item Permutation for \lstinline§\*causetL...§: now deactivated (if activated previously), by default.
\item Labels for \lstinline§\*causetP...§: now deactivated (if activated previously), by default.
\end{itemize}


\subsection[v1.2, 2022-02-07 (Vee)]{v1.2, 2022-02-07}

\subsubsection{New features}

\begin{itemize}\itemsep=-1ex
\item \versioncauset{v1-2}{\pcauset[arrow links]{1,3,2}}%
  New style \lstinline§at=§\PH: to specify the relative point of events (\lstinline§at=§\PH, by default) and position relative to this point using TikZ keys \lstinline§left=§\PH, \lstinline§right=§\PH, etc.
\item New styles \lstinline§cap links§ and \lstinline§arrow links§: add different arrow tips to the start and end of links.
\item New styles \lstinline§link starts=§\PH\ and \lstinline§link ends=§\PH: to modify arrow tips to the start and end of links.
\item Broken links for \lstinline§\causet§: links crossing over unlinked events are broken up now.
\item New styles \lstinline§link pauses=§\PH\ and \lstinline§link resumes=§\PH: to set the link ending style (arrows) at breaking points.
\item Spatial links for \lstinline§\rcauset§: spatial links for spacelike separated events are now supported by \lstinline§\rcauset§, too.
\end{itemize}

\subsubsection{Modifications and fixes}

\begin{itemize}\itemsep=-1ex
\item Color option \lstinline§blue§: blue colors are now different shades of blue, gray and black only.
\end{itemize}


\subsection[v1.1, 2020-12-15 (2-Chain)]{v1.1, 2020-12-15}

\subsubsection{New features}

\begin{itemize}\itemsep=-1ex
\item \versioncauset{v1-1}{\pcauset{1,2}}%
  All colors, size and style options have been moved to PGF keys in the path
\begin{lstlisting}
/tikz/causets/
\end{lstlisting}
\end{itemize}

\subsection[v1.0, 2020-11-08 (Singleton)]{v1.0, 2020-11-08}

\begin{itemize}\itemsep=-1ex
\item \versioncauset{v1-0}{\pcauset{1}}%
  First release of the package \lstinline§causets§ on CTAN, \url{https://ctan.org/pkg/causets}, including all the main commands.
\end{itemize}

\noindent
All previous package versions are at \\
\url{https://github.com/c-minz/LaTeX-causets/tree/main/previous_versions}


\section{Bug reports and package requests}
\label{sec:PackageDevelopment}

To see reported problems, go to \url{https://github.com/c-minz/LaTeX-causets/issues}

If you have a problem when using the package or you would like to have another feature to be implemented, please write a message to \\
christoph(dot)minz(AT)gmail(dot)com\\
For reporting a bug, I much appreciated if you do the following:
\begin{itemize}\itemsep=-1ex
\item Check the issues reported previously if your problem is already listed.
\item Describe your problem including the errors and warning messages, information about the drivers and programs versions.
\item Provide a minimal, working test file (only a single \TeX\ file) that demonstrates the problem.
\end{itemize}

\end{document}
